<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriPal 營養好朋友 - 首頁</title>
    <link rel="icon" type="image/x-icon" href="icon_pal.ico">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/index.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'; this.onload=null;">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet"></noscript>
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    
</head>
<body>
    <!-- 頂部簡化免責聲明 -->
    <div class="top-disclaimer">
        <i class="fas fa-heart"></i>
        <span class="top-disclaimer-text">小帕僅提供營養資訊與知識整理，不提供任何醫療診斷、治療或預防建議，所有內容僅供參考，健康決策請諮詢專業醫師～</span>
        <button class="top-disclaimer-toggle" onclick="toggleDisclaimer(this)">
            <i class="fas fa-chevron-down"></i>
        </button>
    </div>

    <!-- 頂部導航 -->
    <div class="nav-header">
        <div class="spacer-24"></div> <!-- 為了保持兩邊對稱 -->
        <div class="nav-title">NutriPal 營養好朋友</div>
        <div class="spacer-24"></div> <!-- 為了保持兩邊對稱 -->
    </div>

    <!-- 主要內容區 -->
    <div class="app-content">
        <!-- 頂部品牌區 -->
        <div style="padding: 20px 20px 0;" /* keep-inline */>
            <div style="display: flex; align-items: center; margin-bottom: 16px;" /* keep-inline */>
                <!-- 小帕 PalPal 吉祥物圖標 - 使用新上傳的圖片 -->
                <div class="avatar avatar-transparent">
                    <img src="images/mascot/palpal-avatar.png" alt="小帕" class="avatar-image">
                </div>
                <h1 style="margin: 0 0 0 12px; font-size: 24px;" /* keep-inline */>NutriPal 營養好朋友</h1>
            </div>
            <p style="font-size: 18px; font-weight: 600; margin-bottom: 4px;" /* keep-inline */>哈囉！我是小帕 PalPal</p>
            <p style="color: var(--text-secondary); margin-top: 0;" /* keep-inline */>讓我幫你找到最多人使用的營養補充方案！</p>
        </div>

        <!-- 主要 CTA 按鈕 -->
        <div style="padding: 20px 20px 0;" /* keep-inline */>
            <!-- 小帕對話框 -->
            <div class="chat-message chat-message-animated">
                <div class="avatar avatar-transparent">
                    <img src="images/mascot/palpal-avatar.png" alt="小帕" class="avatar-image">
                </div>
                <div class="chat-bubble">
                    <p class="text-margin-bottom-8" style="font-weight: 600;" /* keep-inline */>小帕 PalPal</p>
                    <p class="text-no-margin">你好啊～我可以整理出許多人喜歡的保健品組合供你參考喔！需要我幫你整理哪方面的資訊呢？</p>
                </div>
            </div>
        </div>

        <!-- 熱門健康需求 - 整合了用戶互動區 -->
        <div style="padding: 0 20px; margin-bottom: 20px;" /* keep-inline */>
            <div class="chat-message right chat-message-animated">
                <div class="chat-bubble user">
                    <p class="text-no-margin">我想了解關於...</p>
                </div>
            </div>
            
            <!-- 熱門健康需求標籤 - 改為動態生成 -->
            <div class="health-tags-section">
                <h3 class="health-tags-title">熱門健康需求</h3>
                <div id="health-badges-container" class="health-badges-container">
                    <!-- 由JavaScript動態生成內容 -->
                </div>
            </div>
            
            <div class="chat-message chat-message-animated" style="margin-top: 16px;" /* keep-inline */>
                <div class="avatar avatar-transparent">
                    <img src="images/mascot/palpal-avatar.png" alt="小帕" class="avatar-image">
                </div>
                <div class="chat-bubble">
                    <p class="text-no-margin">想了解更多健康需求？讓我們開始更完整的對話吧！</p>
                </div>
            </div>
            
            <a href="chat.html" class="btn-primary" style="width: 100%; display: block; margin-top: 20px;" /* keep-inline */>
                <i class="fas fa-comment-dots"></i> 了解營養選擇
            </a>
        </div>

        <!-- 產品特色 -->
        <div class="feature-section">
            <h2>小帕能為你做什麼</h2>
            
            <div class="feature-container">
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="feature-content">
                        <h3>幫你整理保健品熱門選擇</h3>
                        <p>我會依據你的需求，找出其他人常用的保健品組合</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="feature-content">
                        <h3>像朋友一樣陪你選擇</h3>
                        <p>用聊天的方式，輕鬆了解你的健康需求和生活習慣</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="feature-content">
                        <h3>提供友善保健品使用指南</h3>
                        <p>整理常見的保健品使用時間和注意事項，方便你參考</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 用戶評價 -->
        <div style="padding: 20px;" /* keep-inline */>
            <h2 style="font-size: 18px; margin-bottom: 16px;" /* keep-inline */>用戶分享</h2>
            
            <div id="testimonials-container" class="testimonials-container">
                <!-- 用戶分享將由 JavaScript 動態加載 -->
            </div>
        </div>

        <!-- 專業背書與免責聲明 -->
        <div style="padding: 20px; margin-bottom: 20px;">
            <div class="disclaimer-wrapper">
                <!-- 使用小帕圖片 -->
                <img src="images/mascot/palpal.png" alt="小帕" class="disclaimer-character" onerror="this.src='https://i.imgur.com/n3C4rQs.png'; this.onerror='';">
                
                <p class="disclaimer-title">小帕是資訊整理小幫手，不是醫師</p>
                <p class="disclaimer-subtitle">我會整理營養知識和熱門資訊供你參考，但不提供醫療建議喔！</p>
                
                <div class="disclaimer-counter">
                    已幫助 <strong>2,483</strong> 位朋友了解營養知識
                </div>
                
                <div class="disclaimer-notices">
                    <p class="disclaimer-notice">
                        <strong>聯盟行銷關係揭露：</strong>本網站與 iHerb 等平台有聯盟行銷合作關係。當您透過我們的連結購買產品時，我們會收到一定的佣金，這不會增加您的購買成本。我們整理的產品資訊是基於健康知識主題，而非療效宣傳。
                    </p>
                    <p class="disclaimer-notice">
                        <strong>免責聲明：</strong>本網站提供的資訊僅作為一般知識參考，不構成醫療建議。保健品不能預防、診斷、治療或治癒任何疾病。若有健康問題，請諮詢專業醫師。
                    </p>
                    <p class="disclaimer-notice">
                        <strong>法規遵循聲明：</strong>本網站遵循台灣衛生福利部相關法規，不宣稱任何營養補充品有預防、改善或治療疾病的功效。用戶分享僅代表個人經驗，不代表所有人都會有相同效果，也不能取代專業醫療建議。
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- 底部導航欄 -->
    <div class="tab-bar">
        <a href="index.html" class="tab-item active">
            <i class="fas fa-home"></i>
            <span>首頁</span>
        </a>
        <a href="chat.html" class="tab-item">
            <i class="fas fa-comment-medical"></i>
            <span>諮詢</span>
        </a>
        <a href="knowledge.html" class="tab-item">
            <i class="fas fa-book-medical"></i>
            <span>知識庫</span>
        </a>
    </div>

    <!-- 添加隨機熱門健康需求的JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 防止瀏覽器緩存
            const cacheBuster = new Date().getTime();
            
            // 載入熱門健康需求排名數據
            fetch(`data/mappings/health_needs_ranking.json?_=${cacheBuster}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('無法載入健康需求排名數據');
                    }
                    return response.json();
                })
                .then(data => {
                    // 獲取排名數據
                    const healthNeeds = data.ranking;
                    
                    // 檢查是否為移動設備
                    const isMobile = window.innerWidth <= 576;
                    
                    // 選擇顯示數量 (移動設備顯示更多，讓使用者可以滑動瀏覽)
                    const displayCount = isMobile ? 8 : 6;
                    
                    // 使用 Fisher-Yates 洗牌算法隨機打亂陣列
                    function shuffleArray(array) {
                        const result = [...array];
                        for (let i = result.length - 1; i > 0; i--) {
                            // 產生0到i之間的隨機索引
                            const j = Math.floor(Math.random() * (i + 1));
                            // 交換元素
                            [result[i], result[j]] = [result[j], result[i]];
                        }
                        return result;
                    }
                    
                    // 將健康需求依照主要類別分組
                    function groupNeeds(needs) {
                        // 確保結果有多樣性
                        const categories = {};
                        needs.forEach(need => {
                            const category = need.category || '其他';
                            if (!categories[category]) {
                                categories[category] = [];
                            }
                            categories[category].push(need);
                        });
                        
                        // 從每個類別選擇一些
                        let result = [];
                        Object.values(categories).forEach(categoryNeeds => {
                            const shuffled = shuffleArray(categoryNeeds);
                            result = result.concat(shuffled.slice(0, 2)); // 每類選2個
                        });
                        
                        // 如果不夠，再從全部中隨機補充
                        if (result.length < displayCount) {
                            const remainingNeeds = shuffleArray(needs.filter(n => !result.includes(n)));
                            result = result.concat(remainingNeeds.slice(0, displayCount - result.length));
                        }
                        
                        // 打亂最終順序
                        return shuffleArray(result).slice(0, displayCount);
                    }
                    
                    // 獲取分組後的健康需求
                    const selected = groupNeeds(healthNeeds);
                    
                    // 獲取容器元素
                    const container = document.getElementById('health-badges-container');
                    
                    // 清空容器
                    container.innerHTML = '';
                    
                    // 添加隨機選擇的健康需求標籤
                    selected.forEach(need => {
                        const badge = document.createElement('a');
                        badge.href = `chat.html?health=${encodeURIComponent(need.name)}`;
                        badge.className = 'health-badge';
                        badge.setAttribute('data-category', need.category || '其他');
                        badge.setAttribute('data-rank', need.rank || 999);
                        badge.innerHTML = `<i class="${need.icon}"></i> ${need.name}`;
                        
                        container.appendChild(badge);
                    });
                    
                    // 在控制台輸出當前選擇的健康需求，方便調試
                    console.log('當前顯示的健康需求:', selected.map(item => item.name));
                })
                .catch(error => {
                    console.error('載入健康需求排名失敗:', error);
                    
                    // 如果載入失敗，顯示默認健康需求
                    const defaultNeeds = [
                        { name: '睡眠品質', icon: 'fas fa-moon', category: '日常健康' },
                        { name: '免疫力提升', icon: 'fas fa-shield-virus', category: '預防保健' },
                        { name: '記憶力', icon: 'fas fa-brain', category: '腦部健康' },
                        { name: '關節保養', icon: 'fas fa-walking', category: '骨骼健康' },
                        { name: '眼睛保健', icon: 'fas fa-eye', category: '感官健康' },
                        { name: '腸道健康', icon: 'fas fa-heartbeat', category: '消化系統' }
                    ];
                    
                    const container = document.getElementById('health-badges-container');
                    container.innerHTML = '';
                    
                    defaultNeeds.forEach(need => {
                        const badge = document.createElement('a');
                        badge.href = `chat.html?health=${encodeURIComponent(need.name)}`;
                        badge.className = 'health-badge';
                        badge.setAttribute('data-category', need.category);
                        badge.innerHTML = `<i class="${need.icon}"></i> ${need.name}`;
                        
                        container.appendChild(badge);
                    });
                });
                
            // 用戶分享部分 - 增加更多用戶並實現隨機顯示
            const allTestimonials = [
                {
                    name: '黃女士',
                    icon: 'fas fa-user',
                    age: '58',
                    job: '退休人士',
                    rating: 5,
                    text: '網站設計簡潔明瞭，即使我這年紀的人也能輕鬆瀏覽。特別喜歡健康分類的圖標設計，讓我一眼就能找到想了解的內容，不需要到處點擊尋找。'
                },
                {
                    name: '陳小姐',
                    icon: 'fas fa-user',
                    age: '40',
                    job: '上班族',
                    rating: 5,
                    text: '睡眠相關的文章對我幫助很大。作為上班族，壓力大常影響睡眠，這裡提供了很多實用的放鬆技巧和營養建議，讓我知道如何改善睡眠品質。'
                },
                {
                    name: '趙先生',
                    icon: 'fas fa-user',
                    age: '36',
                    job: '銷售經理',
                    rating: 4,
                    text: '這個網站最棒的是對話式的互動設計，非常直覺。我只需簡單回答幾個問題，小帕就能幫我整理出適合的保健品選擇和服用建議，不像其他網站要自己搜尋比較，省下很多時間。'
                },
                {
                    name: '林小姐',
                    icon: 'fas fa-user',
                    age: '32',
                    job: '護理師',
                    rating: 5,
                    text: '免疫相關的文章內容紮實，引用的資料也很專業。作為護理師，我能看出這些內容確實參考了可靠的醫學資源，而不是網路上的偽科學。'
                },
                {
                    name: '李先生',
                    icon: 'fas fa-user',
                    age: '45',
                    job: '健身教練',
                    rating: 5,
                    text: '網站的閱讀體驗很舒適，字體大小適中且清晰。我常在閒暇時間閱讀關於心血管健康的資訊，整體文章排版合理，閱讀起來不會感到疲勞。'
                },
                {
                    name: '吳小姐',
                    icon: 'fas fa-user',
                    age: '28',
                    job: '軟體工程師',
                    rating: 4,
                    text: '文章內容層次分明，從入門到進階，讓我這個健康知識小白也能逐步理解。特別是關於認知與專注力的文章，解釋得非常清楚易懂。'
                },
                {
                    name: '王先生',
                    icon: 'fas fa-user',
                    age: '52',
                    job: '企業主管',
                    rating: 5,
                    text: '網站的無廣告設計很舒適，但最喜歡的是小帕這個角色的陪伴感。每次閱讀文章，小帕都像朋友一樣在身邊解說，文章最後的溫馨提醒也很貼心，讓營養知識不再冰冷艱澀。'
                },
                {
                    name: '謝小姐',
                    icon: 'fas fa-user',
                    age: '31',
                    job: '瑜伽老師',
                    rating: 5,
                    text: '季節性過敏的相關建議對我幫助很大，提供的生活調整方式和飲食建議很實用。作為瑜伽老師，我也把這些知識融入到我的課程中分享給學生。'
                },
                {
                    name: '鄭先生',
                    icon: 'fas fa-user',
                    age: '38',
                    job: '工程師',
                    rating: 4,
                    text: '網站的圖表和數據視覺化做得很好，作為理工男特別欣賞。複雜的健康資訊通過直觀的圖表呈現，讓人一目了然，比純文字描述容易理解多了。'
                },
                {
                    name: '張女士',
                    icon: 'fas fa-user',
                    age: '62',
                    job: '退休教師',
                    rating: 5,
                    text: '淺眠問題困擾我多年，網站提供的改善睡眠品質的建議非常實用。不像其他網站只說要吃什麼保健品，這裡還講解了原理和生活習慣的調整方法。'
                },
                {
                    name: '劉先生',
                    icon: 'fas fa-user',
                    age: '48',
                    job: '業務經理',
                    rating: 4,
                    text: '網站內容的更新頻率很適中，每次訪問都能看到一些新內容，但又不會過於頻繁讓人跟不上。這種節奏很適合我這種忙碌但又想持續學習的上班族。'
                },
                {
                    name: '楊小姐',
                    icon: 'fas fa-user',
                    age: '34',
                    job: '營養師',
                    rating: 5,
                    text: '作為營養師，我很欣賞網站的對話互動模式，讓複雜的保健品資訊變得簡單易懂。用戶只要跟著對話流程走，就能迅速找到適合自己的保健品和正確的使用方法，這是很多健康網站做不到的。'
                },
                {
                    name: '周先生',
                    icon: 'fas fa-user',
                    age: '56',
                    job: '計程車司機',
                    rating: 5,
                    text: '網站的文章長度很合適，既有深度又不會太冗長，對我這種工作間隙閱讀的人來說很友好。特別喜歡關於辦公室心血管健康的建議，非常實用。'
                },
                {
                    name: '蔡小姐',
                    icon: 'fas fa-user',
                    age: '29',
                    job: '素食主義者',
                    rating: 4,
                    text: '身為素食者，我特別喜歡可愛的小帕陪我一起學習營養知識的感覺。文章最後都會有小帕的飲食小提醒和注意事項，這些貼心設計讓健康知識變得有溫度，也更容易記住重點。'
                },
                {
                    name: '馮先生',
                    icon: 'fas fa-user',
                    age: '42',
                    job: '小學老師',
                    rating: 5,
                    text: '網站的內容編排很有系統，我經常向家長推薦這個網站上的有用文章。資訊整理得很好，能幫助家長們更好地理解兒童營養需求與健康知識。'
                }
            ];
            
            // 使用洗牌算法隨機選擇用戶分享
            function shuffleArray(array) {
                const result = [...array];
                for (let i = result.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [result[i], result[j]] = [result[j], result[i]];
                }
                return result;
            }
            
            // 根據螢幕寬度決定顯示多少個用戶分享
            function getDisplayCount() {
                if (window.innerWidth >= 1200) {
                    return 3; // 大螢幕顯示3個
                } else if (window.innerWidth >= 768) {
                    return 2; // 中等螢幕顯示2個
                } else {
                    return 2; // 手機螢幕顯示2個
                }
            }
            
            // 打亂並顯示用戶分享
            function displayTestimonials() {
                const displayCount = getDisplayCount();
                const selectedTestimonials = shuffleArray(allTestimonials).slice(0, displayCount);
                console.log(`當前螢幕寬度: ${window.innerWidth}px, 顯示${displayCount}個用戶分享:`, selectedTestimonials.map(item => item.name));
                
                const testimonialsContainer = document.getElementById('testimonials-container');
                testimonialsContainer.innerHTML = ''; // 清空容器
                
                selectedTestimonials.forEach(testimonial => {
                    const testimonialCard = document.createElement('div');
                    testimonialCard.className = 'testimonial-card';
                    
                    let stars = '';
                    for (let i = 0; i < 5; i++) {
                        if (i < testimonial.rating) {
                            stars += '<i class="fas fa-star" style="color: #F5B17B;" /* keep-inline js-generated */></i>';
                        } else {
                            stars += '<i class="far fa-star" style="color: #F5B17B;" /* keep-inline js-generated */></i>';
                        }
                    }
                    
                    testimonialCard.innerHTML = `
                        <div class="testimonial-header">
                            <div class="testimonial-avatar">
                                <i class="${testimonial.icon}"></i>
                            </div>
                            <div style="font-weight: 600; margin: 10px 0 5px; font-size: 16px;" /* keep-inline js-generated */>${testimonial.name}</div>
                            <div style="font-size: 14px; color: var(--text-secondary);" /* keep-inline js-generated */>${testimonial.age}歲，${testimonial.job}</div>
                        </div>
                        <p style="color: var(--text-secondary); margin: 0 0 15px; font-size: 14px; line-height: 1.6; text-align: center;" /* keep-inline js-generated */>${testimonial.text}</p>
                        <div style="text-align: center;" /* keep-inline js-generated */>${stars}</div>
                    `;
                    
                    testimonialsContainer.appendChild(testimonialCard);
                });
            }
            
            // 初始顯示
            displayTestimonials();
            
            // 監聽窗口大小變化，當尺寸變化較大時重新計算和顯示
            let lastWidth = window.innerWidth;
            window.addEventListener('resize', function() {
                // 只有當尺寸變化超過重要斷點(breakpoint)時才重新顯示
                const currentWidth = window.innerWidth;
                const isBreakpointChange = 
                    (lastWidth < 768 && currentWidth >= 768) || 
                    (lastWidth >= 768 && currentWidth < 768) ||
                    (lastWidth < 1200 && currentWidth >= 1200) ||
                    (lastWidth >= 1200 && currentWidth < 1200);
                
                if (isBreakpointChange) {
                    lastWidth = currentWidth;
                    displayTestimonials();
                }
            });
        });
    </script>


    
    <!-- 添加對話框漸入動畫的JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 選取所有 chat-message 元素
            const chatMessages = document.querySelectorAll('.chat-message');
            
            // 使用 setTimeout 添加延遲，使動畫效果更明顯
            chatMessages.forEach((message, index) => {
                setTimeout(() => {
                    message.style.opacity = '1';
                }, 100 * (index + 1)); // 每個對話框依序顯示
            });
        });
    </script>
</body>
</html> 