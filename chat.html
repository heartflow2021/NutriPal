<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>營養好朋友 - 對話推薦</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- iOS 狀態欄 -->
    <div class="status-bar">
        <div class="status-bar-time">9:43</div>
        <div class="status-bar-icons">
            <i class="fas fa-signal"></i>
            <i class="fas fa-wifi"></i>
            <i class="fas fa-battery-full"></i>
        </div>
    </div>

    <!-- 頂部導航 -->
    <div class="nav-header">
        <a href="home.html" style="color: var(--text-primary); margin-right: 12px;">
            <i class="fas fa-arrow-left"></i>
        </a>
        <div style="flex: 1; text-align: center; font-weight: 600;">健康需求整理</div>
        <div style="width: 24px;"></div> <!-- 為了保持兩邊對稱 -->
    </div>

    <!-- 進度條 -->
    <div class="progress-container">
        <div class="d-flex justify-content-between" style="font-size: 12px; margin-bottom: 4px;">
            <span>開始</span>
            <span>步驟 2/5</span>
        </div>
        <div class="progress-bar">
            <div class="progress-bar-fill" style="width: 40%;"></div>
        </div>
    </div>

    <!-- 主要內容區 -->
    <div class="app-content" style="background-color: var(--background); padding: 16px;">
        <!-- 對話流程 -->
        <div class="chat-message">
            <div class="avatar" style="background-color: var(--primary);">
                <i class="fas fa-archive"></i>
            </div>
            <div class="chat-bubble">
                <p style="margin: 0 0 8px; font-weight: 600;">小帕 Pal</p>
                <p style="margin: 0;">Hi！我是你的資料整理小幫手小帕！想了解你的需求，幫你找到適合的保健品選項～</p>
            </div>
        </div>

        <div class="chat-message">
            <div class="avatar" style="background-color: var(--primary);">
                <i class="fas fa-archive"></i>
            </div>
            <div class="chat-bubble">
                <p style="margin: 0;">首先，請告訴我你目前最想改善的健康狀況是什麼呢？我來幫你找找大家常選的補品組合～</p>
            </div>
        </div>

        <!-- 選擇按鈕 -->
        <div style="margin-bottom: 24px;">
            <button class="option-button selected">
                <div class="d-flex align-items-center">
                    <i class="fas fa-moon" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">改善睡眠品質</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">入睡困難、易醒、睡眠淺</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-shield-virus" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">增強免疫力</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">容易感冒、抵抗力弱</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-brain" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">提升腦力與專注</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">注意力不集中、記憶力減退</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-heartbeat" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">心臟健康</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">血壓、膽固醇控制</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-bone" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">骨骼與關節健康</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">關節不適、骨質疏鬆預防</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-eye" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">視力保健</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">用眼疲勞、乾澀、視力保養</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-tint" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">肝臟保健</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">解酒、代謝、排毒</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-venus" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">女性保健</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">經期調理、更年期、孕期營養</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-apple-alt" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">消化系統保健</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">腸胃健康、消化不良</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-weight" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">體重管理</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">新陳代謝、飽足感、控制食慾</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-plus" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">其他健康需求</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">輸入您的特定需求</p>
                    </div>
                </div>
            </button>
        </div>

        <div class="chat-message right">
            <div class="chat-bubble user">
                <p style="margin: 0;">我選擇改善睡眠品質</p>
            </div>
        </div>

        <div class="chat-message">
            <div class="avatar" style="background-color: var(--primary);">
                <i class="fas fa-archive"></i>
            </div>
            <div class="chat-bubble">
                <p style="margin: 0;">了解！良好的睡眠對健康很重要呢。接下來，請告訴我你目前的生活型態，這樣我能整理更多適合你情況的熱門選項喔～</p>
            </div>
        </div>

        <!-- 生活型態選項 -->
        <div style="margin-bottom: 24px;">
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-briefcase" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">長時間工作</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">工作壓力大、久坐</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-utensils" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">飲食不規律</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">外食多、營養不均衡</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-running" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">運動量不足</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">缺乏規律運動習慣</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-mobile-alt" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">長時間使用電子產品</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">眼睛疲勞、藍光傷害</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-wine-glass-alt" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">社交應酬多</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">飲酒、熬夜頻繁</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-cloud-sun" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">經常戶外活動</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">陽光曝曬、環境污染</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-keyboard" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">多重工作任務</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">注意力分散、思緒繁雜</p>
                    </div>
                </div>
            </button>
        </div>

        <!-- 生活型態選項後的預算選擇步驟 -->
        <div class="chat-message" id="budget-question" style="display: none;">
            <div class="avatar" style="background-color: var(--primary);">
                <i class="fas fa-archive"></i>
            </div>
            <div class="chat-bubble">
                <p style="margin: 0;">謝謝你的分享！最後一個問題，你預計的每月保健品預算大約是多少呢？這能幫助我推薦更符合你需求的選項。</p>
            </div>
        </div>

        <!-- 預算選項 -->
        <div id="budget-options" style="margin-bottom: 24px; display: none;">
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-dollar-sign" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">經濟實惠型</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">每月 500 元以下</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-dollar-sign" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">中等預算</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">每月 500-1500 元</p>
                    </div>
                </div>
            </button>

            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-dollar-sign" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">高品質優先</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">每月 1500 元以上</p>
                    </div>
                </div>
            </button>
            
            <button class="option-button">
                <div class="d-flex align-items-center">
                    <i class="fas fa-dollar-sign" style="margin-right: 12px; color: var(--primary);"></i>
                    <div>
                        <p style="margin: 0 0 2px; font-weight: 600;">無特定預算</p>
                        <p style="margin: 0; font-size: 12px; color: var(--text-secondary);">以效果為優先考量</p>
                    </div>
                </div>
            </button>
        </div>

        <!-- 最終回應和預覽 -->
        <div class="chat-message" id="final-response" style="display: none;">
            <div class="avatar" style="background-color: var(--primary);">
                <i class="fas fa-archive"></i>
            </div>
            <div class="chat-bubble">
                <p style="margin: 0;">太好了！根據你的健康需求、生活型態和預算，我已整理出符合你情況的保健品推薦。請稍候片刻，正在為你生成個人化的保健品清單...</p>
            </div>
        </div>
        
        <!-- 生成結果的加載指示器 -->
        <div id="loading-indicator" style="display: none; text-align: center; margin: 20px 0;">
            <div class="spinner" style="width: 40px; height: 40px; margin: 0 auto; border: 4px solid var(--border-color); border-top: 4px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <p style="margin-top: 8px; color: var(--text-secondary); font-size: 14px;">正在整理適合你的保健品資訊...</p>
        </div>

        <!-- 底部免責聲明 -->
        <div class="text-center mt-3 mb-2">
            <p style="font-size: 10px; color: var(--text-secondary);">小帕不提供任何醫療建議，所有資訊僅供參考，請諮詢專業醫師進行健康決策～</p>
        </div>
    </div>

    <!-- 底部輸入框 -->
    <div class="input-box">
        <button style="background-color: white; border: none; padding: 0; margin-right: 12px;">
            <i class="fas fa-plus-circle" style="font-size: 24px; color: var(--primary);"></i>
        </button>
        <input type="text" placeholder="輸入您的回覆..." style="flex: 1; border: 1px solid var(--border-color); border-radius: 24px; padding: 8px 16px; font-size: 14px; outline: none;">
        <button style="background-color: var(--primary); border: none; border-radius: 50%; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; margin-left: 12px;">
            <i class="fas fa-arrow-right" style="color: white;"></i>
        </button>
    </div>

    <!-- 底部導航欄 -->
    <div class="tab-bar">
        <div class="tab-item">
            <i class="fas fa-home"></i>
            <span>首頁</span>
        </div>
        <div class="tab-item active">
            <i class="fas fa-comment-medical"></i>
            <span>諮詢</span>
        </div>
        <div class="tab-item">
            <i class="fas fa-book-medical"></i>
            <span>知識庫</span>
        </div>
        <div class="tab-item">
            <i class="fas fa-user"></i>
            <span>我的</span>
        </div>
    </div>
</body>
<script>
    // 對話流程控制
    document.addEventListener('DOMContentLoaded', function() {
        // 更新進度條函數
        function updateProgress(step, totalSteps) {
            const progressBar = document.querySelector('.progress-bar-fill');
            const stepText = document.querySelector('.d-flex.justify-content-between span:last-child');
            const percentage = (step / totalSteps) * 100;
            
            progressBar.style.width = percentage + '%';
            stepText.textContent = `步驟 ${step}/${totalSteps}`;
        }
        
        // 選項按鈕點擊事件
        const optionButtons = document.querySelectorAll('.option-button');
        optionButtons.forEach(button => {
            button.addEventListener('click', function() {
                // 取消其他按鈕的選中狀態
                const parentDiv = this.parentElement;
                parentDiv.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                // 選中當前按鈕
                this.classList.add('selected');
                
                // 模擬用戶回答
                const optionText = this.querySelector('p:first-child').textContent;
                const userBubble = document.createElement('div');
                userBubble.className = 'chat-message right';
                userBubble.innerHTML = `
                    <div class="chat-bubble user">
                        <p style="margin: 0;">我選擇${optionText}</p>
                    </div>
                `;
                
                // 判斷當前是哪個步驟
                // 如果是健康需求步驟
                if (parentDiv.previousElementSibling.querySelector('p').textContent.includes('健康狀況')) {
                    // 延遲顯示，模擬打字效果
                    setTimeout(() => {
                        parentDiv.after(userBubble);
                        
                        // 更新進度條到步驟2
                        updateProgress(2, 5);
                        
                        // 顯示生活型態問題
                        const lifeStyleQuestion = document.querySelector('.chat-message:nth-of-type(4)');
                        lifeStyleQuestion.style.display = 'flex';
                        lifeStyleQuestion.style.animation = 'fadeIn 0.5s';
                        
                        // 顯示生活型態選項
                        const lifeStyleOptions = parentDiv.nextElementSibling.nextElementSibling;
                        lifeStyleOptions.style.display = 'block';
                        lifeStyleOptions.style.animation = 'fadeIn 0.5s';
                        
                        // 滾動到最新內容
                        lifeStyleOptions.scrollIntoView({ behavior: 'smooth' });
                    }, 500);
                }
                // 如果是生活型態步驟
                else if (parentDiv.previousElementSibling.querySelector('p').textContent.includes('生活型態')) {
                    setTimeout(() => {
                        parentDiv.after(userBubble);
                        
                        // 更新進度條到步驟3
                        updateProgress(3, 5);
                        
                        // 顯示預算問題
                        const budgetQuestion = document.getElementById('budget-question');
                        budgetQuestion.style.display = 'flex';
                        budgetQuestion.style.animation = 'fadeIn 0.5s';
                        
                        // 顯示預算選項
                        const budgetOptions = document.getElementById('budget-options');
                        budgetOptions.style.display = 'block';
                        budgetOptions.style.animation = 'fadeIn 0.5s';
                        
                        // 滾動到最新內容
                        budgetOptions.scrollIntoView({ behavior: 'smooth' });
                    }, 500);
                }
                // 如果是預算步驟
                else if (parentDiv.id === 'budget-options') {
                    setTimeout(() => {
                        parentDiv.after(userBubble);
                        
                        // 更新進度條到步驟4
                        updateProgress(4, 5);
                        
                        // 顯示最終回應
                        const finalResponse = document.getElementById('final-response');
                        finalResponse.style.display = 'flex';
                        finalResponse.style.animation = 'fadeIn 0.5s';
                        
                        // 顯示加載指示器
                        const loadingIndicator = document.getElementById('loading-indicator');
                        loadingIndicator.style.display = 'block';
                        loadingIndicator.style.animation = 'fadeIn 0.5s';
                        
                        // 滾動到最新內容
                        loadingIndicator.scrollIntoView({ behavior: 'smooth' });
                        
                        // 模擬數據加載
                        setTimeout(() => {
                            // 隱藏加載指示器
                            loadingIndicator.style.display = 'none';
                            
                            // 更新進度條到步驟5
                            updateProgress(5, 5);
                            
                            // 跳轉到結果頁
                            window.location.href = 'results.html';
                        }, 3000);
                    }, 500);
                }
            });
        });
        
        // 文字輸入框處理
        const textInput = document.querySelector('input[type="text"]');
        const sendButton = textInput.nextElementSibling;
        
        // 輸入驗證
        textInput.addEventListener('input', function() {
            if (this.value.trim() !== '') {
                sendButton.style.opacity = '1';
                sendButton.disabled = false;
            } else {
                sendButton.style.opacity = '0.7';
                sendButton.disabled = true;
            }
        });
        
        // 發送按鈕點擊處理
        sendButton.addEventListener('click', function() {
            if (textInput.value.trim() === '') return;
            
            // 獲取用戶輸入
            const userInput = textInput.value.trim();
            
            // 創建用戶消息氣泡
            const userBubble = document.createElement('div');
            userBubble.className = 'chat-message right';
            userBubble.innerHTML = `
                <div class="chat-bubble user">
                    <p style="margin: 0;">${userInput}</p>
                </div>
            `;
            
            // 添加到對話框中
            const appContent = document.querySelector('.app-content');
            appContent.appendChild(userBubble);
            
            // 清空輸入框
            textInput.value = '';
            
            // 如果是"其他健康需求"輸入，模擬回應
            setTimeout(() => {
                const botResponse = document.createElement('div');
                botResponse.className = 'chat-message';
                botResponse.innerHTML = `
                    <div class="avatar" style="background-color: var(--primary);">
                        <i class="fas fa-archive"></i>
                    </div>
                    <div class="chat-bubble">
                        <p style="margin: 0;">謝謝您分享的健康需求！接下來，請告訴我你目前的生活型態，這樣我能整理更多適合你情況的熱門選項喔～</p>
                    </div>
                `;
                appContent.appendChild(botResponse);
                
                // 更新進度條到步驟2
                updateProgress(2, 5);
                
                // 滾動到最新內容
                botResponse.scrollIntoView({ behavior: 'smooth' });
            }, 800);
        });
        
        // 鍵盤事件處理
        textInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !sendButton.disabled) {
                sendButton.click();
            }
        });
        
        // 添加 CSS 動畫
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            .option-button {
                transition: transform 0.2s ease, background-color 0.3s ease;
            }
            
            .option-button:hover {
                transform: translateY(-2px);
            }
            
            .chat-message {
                animation: fadeIn 0.5s;
            }
        `;
        document.head.appendChild(style);
    });
</script>
</html> 