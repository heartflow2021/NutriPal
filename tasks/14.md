# 任務14：整合OpenAI DALL·E 3實現圖片自動生成

## 任務概述
在知識庫自動化內容生成系統中整合OpenAI的DALL·E 3 API，實現自動化圖片生成功能。根據文章標題或主題，自動生成吉卜力風格的插圖，為所有知識庫文章提供一致且高質量的視覺元素。

## 接受標準
- 成功整合DALL·E 3 API，能夠可靠調用圖片生成服務
- 生成的圖片符合以下要求：
  - 吉卜力風格的插畫
  - 尺寸為1024x1024像素
  - 清晰度高，適合網頁展示
  - 內容與文章主題相關
  - 顏色和風格符合NutriPal的設計規範
- 實現圖片生成請求隊列和異步處理機制
- 建立健壯的錯誤處理機制，處理API調用失敗的情況
- 生成的圖片能夠臨時保存在本地，等待後續上傳到Google Drive

## 實施步驟
1. 設置DALL·E 3 API整合
   - 實現安全的API金鑰管理
   - 建立API調用客戶端和請求/響應處理

2. 設計圖片生成提示模板
   - 創建專門的提示模板，指導DALL·E生成吉卜力風格插畫
   - 實現動態提示組合，根據文章標題和主題生成完整提示
   - 添加風格一致性指導語，確保所有圖片風格統一

3. 開發圖片生成服務
   - 實現ImageGenerationService處理圖片生成
   - 支持不同分辨率和品質設置
   - 實現圖片內容適當性檢查

4. 實現本地圖片存儲機制
   - 設計臨時文件存儲結構和命名規則
   - 實現圖片下載和本地保存功能
   - 添加圖片元數據管理

5. 開發異步處理機制
   - 實現後台任務隊列用於處理圖片生成請求
   - 建立任務狀態追蹤和結果獲取機制

6. 添加API端點
   - 整合圖片生成服務與API路由
   - 實現請求驗證和響應格式化
   - 提供圖片預覽功能

## 依賴項
- 任務12：開發基於FastAPI的知識庫自動化內容生成系統

## 預計工時
3天

## 負責人
待分配

## 備註
DALL·E 3生成的圖片需要確保符合品牌視覺風格。吉卜力風格的插畫能夠為健康知識內容增添自然、溫暖的視覺元素，提升用戶閱讀體驗。需注意圖片內容必須避免醫療或療效暗示，保持知識分享的中立性。 