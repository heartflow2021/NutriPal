# 營養好朋友 NutriPal - 開發指南

## 環境設置

### 必要條件
- Node.js 16.x 或更高版本
- npm 或 yarn 包管理器
- Git

### 開始步驟

1. **克隆項目**
```bash
git clone [您的儲存庫URL]
cd iherb
```

2. **安裝依賴**
```bash
npm install
# 或
yarn install
```

3. **環境變數設置**
創建 `.env.local` 文件並添加必要的環境變數：
```
NEXT_PUBLIC_AIRTABLE_API_KEY=your_airtable_api_key
NEXT_PUBLIC_AIRTABLE_BASE_ID=your_airtable_base_id
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
NEXT_PUBLIC_SENDGRID_API_KEY=your_sendgrid_api_key
NEXT_PUBLIC_IHERB_AFFILIATE_ID=your_iherb_affiliate_id
```

4. **運行開發服務器**
```bash
npm run dev
# 或
yarn dev
```

5. **訪問本地開發站點**
打開瀏覽器，訪問 [http://localhost:3000](http://localhost:3000)

## 項目結構

```
/
├── public/               # 靜態資源
│   ├── images/           # 圖片資源
│   └── fonts/            # 字體文件
├── src/
│   ├── components/       # React 組件
│   │   ├── common/       # 通用組件
│   │   ├── layout/       # 布局組件
│   │   ├── survey/       # 問卷調查組件
│   │   └── products/     # 產品相關組件
│   ├── pages/            # Next.js 頁面
│   ├── styles/           # 全局樣式
│   ├── hooks/            # 自定義 React hooks
│   ├── lib/              # 工具和庫函數
│   ├── utils/            # 通用工具函數
│   ├── types/            # TypeScript 類型定義
│   ├── context/          # React Context
│   └── services/         # API 和服務
├── next.config.js        # Next.js 配置
├── tailwind.config.js    # Tailwind CSS 配置
├── tsconfig.json         # TypeScript 配置
└── package.json          # 項目依賴和腳本
```

## 開發工作流程

### 功能開發

1. **創建特性分支**
```bash
git checkout -b feature/功能名稱
```

2. **定期提交更改**
```bash
git add .
git commit -m "描述此次更改的內容"
```

3. **推送到遠程儲存庫**
```bash
git push origin feature/功能名稱
```

4. **創建 Pull Request 以合併到主分支**

### 代碼規範與格式化

- 使用 ESLint 和 Prettier 進行代碼格式檢查和格式化
- 運行 `npm run lint` 檢查代碼問題
- 運行 `npm run format` 自動格式化代碼

## 數據處理

### Airtable 設置
1. 創建 Airtable 帳戶並新建 Base
2. 按照 `實現計劃.md` 中的數據結構創建表格
3. 獲取 API 密鑰和 Base ID

### Supabase 設置
1. 創建 Supabase 項目
2. 設置必要的數據表和認證設置
3. 獲取 URL 和匿名密鑰

## 部署流程

### Vercel 部署
1. 在 Vercel 上導入 GitHub 儲存庫
2. 配置環境變數
3. 部署應用

## 常見問題與解決方案

### 本地開發問題
- **依賴安裝失敗**: 嘗試清除 npm 緩存 `npm cache clean --force` 後重新安裝
- **環境變數未生效**: 確保正確創建 `.env.local` 文件並重新啟動開發服務器

### API 整合問題
- **Airtable API 限流**: 實現緩存策略並減少請求頻率
- **CORS 問題**: 在 Next.js API 路由中代理請求

## 資源與參考

- [Next.js 文檔](https://nextjs.org/docs)
- [Tailwind CSS 文檔](https://tailwindcss.com/docs)
- [React Hook Form 文檔](https://react-hook-form.com/get-started)
- [Airtable API 文檔](https://airtable.com/developers/web/api/introduction)
- [Supabase 文檔](https://supabase.io/docs)
- [Vercel 部署文檔](https://vercel.com/docs)

---

如有任何疑問或需要幫助，請聯繫項目負責人。 